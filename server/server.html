<head>
  <title>喵德利-社区</title>
</head>

<body>
	<div class="font-hei">
		{{> headerDisplay}}
		{{> modalDisplay}}
		{{> bodyDisplay}}
	</div>
</body>

<template name="chatDisplay">
	<div class="panel panel-default">
		<div class="panel-heading">Chat</div>
		<div class="panel-body">Body</div>
		<div class="panel-footer">
			<div class="media">
				<a href="#" class="pull-left">
					<img src="{{myFaceImageUrl}}" class="media-object">
				</a>
				<div class="media-body">
					<form>
						<fieldset>
							<div class="form-group">
								<textarea class="form-control" rows="4"></textarea>
							</div>
							<button class="btn btn-default">发送</button>
						</fieldset>
					</form>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="headerDisplay">
	<div class="navbar navbar-default" role="navigation">
		<div class="navbar-header">
			<a href="#" class="navbar-brand">Miaodeli</a>
			<ul class="nav navbar-nav">
				<li class="active">
					<a href="#home" data-toggle="tab">首页</a>
				</li>
				<li>
					<a href="#all-user" data-toggle="tab">用户</a>
				</li>
			</ul>
		</div>
		{{#if currentUser}}
			<a href="#" style="margin-right: 15px" class="sign-out btn btn-default navbar-btn pull-right">注销 {{myName}}</a>
		{{else}}
			<a href="#" style="margin-right: 15px" class="btn btn-default navbar-btn pull-right"  data-toggle="modal" data-target="#modal">注册 / 登录</a>
		{{/if}}
	</div>
</template>

<template name="bodyDisplay">
	<div class="container">
		<div class="tab-content">
			<div class="tab-pane active" id="home">
				{{> homeDisplay}}
			</div>
			<div class="tab-pane" id="all-user">
				{{> allUserDisplay}}
			</div>
		</div>		
	</div>
</template>

<template name="modalDisplay">
	<div class="modal" id="modal">
		{{#if showSignUpDisplay}}
			{{> signUpDisplay}}
		{{else}}
			{{> signInDisplay}}
		{{/if}}
	</div>
</template>

<template name="signInDisplay">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">登录</h4>
			</div>
			<div class="modal-body">
				<form>
					<fieldset>
						<div class="form-group">
							<label>邮箱</label>
							<input type="email" class="email form-control" placeholder="请输入您的邮箱">
						</div>
						<div class="form-group">
							<label>密码</label>
							<input type="password" class="password form-control" placeholder="请输入您的密码">
						</div>
					</fieldset>
				</form>
				<span>还没有帐号？<a class="sign-up" href="javascript:">立即注册</a></span>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary">登录</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</template>

<template name="signUpDisplay">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">注册</h4>
			</div>
			<div class="modal-body">
				<form>
					<fieldset>
						<div class="form-group">
							<label>姓名</label>
							<input type="text" class="name form-control" placeholder="请输入您的姓名">
						</div>
						<div class="form-group">
							<label>邮箱</label>
							<input type="email" class="email form-control" placeholder="请输入您的邮箱">
						</div>
						<div class="form-group">
							<label>密码</label>
							<input type="password" class="password form-control" placeholder="请输入您的密码">
						</div>
					</fieldset>
				</form>
				<span>已经有帐号？<a class="sign-in" href="javascript:">立即登录</a></span>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary">注册</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</template>

<template name="homeDisplay">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				{{> chatDisplay}}
			</div>
			<div class="col-md-4">
				{{> allFriendDisplay}}
			</div>
		</div>
	</div>
</template>

<template name="allUserDisplay">
	{{#each allUser}}
		{{> userDisplay}}
	{{/each}}
</template>

<template name="userDisplay">
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="media">
				<div class="pull-left">
					<img src="{{faceImageUrl}}" alt="" class="media-object">
				</div>
				<div class="media-body">
					<strong>{{profile.name}}</strong><br>
					{{profile.email}}			
				</div>
			</div>
		</div>
		<div class="panel-footer">
			{{#if canAddFriend}}
				<a href="javascript:" class="add-friend btn btn-primary">+ 加为好友</a>
			{{/if}}
			{{#if canRemoveFriend}}
				<a href="javascript:" class="remove-friend btn btn-warning">- 删除好友</a>
			{{/if}}
			<a href="javascript:" class="detial btn btn-default">详细资料</a>
		</div>
	</div>
</template>

<template name="allFriendDisplay">
	<div class="panel panel-default">
		<div class="panel-heading">联系人</div>
		<ul class="list-group">
			{{#each allFriend}}
				{{> friendDisplay}}
			{{else}}
				{{> emptyFriendDisplay}}
			{{/each}}
		</ul>
		<div class="panel-footer">
			<a href="#" class="btn btn-default">+ 添加</a>
		</div>
	</div>
</template>

<template name="friendDisplay">
	<li class="list-group-item">
		<div class="media">
			<div class="pull-left">
				<img src="{{faceImageUrl}}" alt="" class="media-object">
			</div>
			<div class="media-body">
				<strong>{{friendProfile.name}}</strong><br>
				{{friendProfile.email}}			
			</div>
		</div>
	</li>
</template>

<template name="emptyFriendDisplay">
	<li class="list-group-item">
		您还没有联系人，赶快添加吧 :)
	</li>
</template>